---
sidebar_position: 1
sidebar_label: 2026
---

# 2026 Changelog

### ClickHouse release v25.8.16.34-lts (7938087aa80) FIXME as compared to v25.8.15.35-lts (7a0b36cf893)

#### Improvement
* Backported in [#95144](https://github.com/ClickHouse/ClickHouse/issues/95144): Force purging of jemalloc arenas in case the ratio of dirty pages size to `max_server_memory_usage` exceeds `memory_worker_purge_dirty_pages_threshold_ratio`. [#93500](https://github.com/ClickHouse/ClickHouse/pull/93500) ([Eduard Karacharov](https://github.com/korowa)).
* Backported in [#94727](https://github.com/ClickHouse/ClickHouse/issues/94727): Add support for SQL-defined named collections in BACKUP/RESTORE for S3 and Azure Blob Storage. Closes [#94604](https://github.com/ClickHouse/ClickHouse/issues/94604). [#94605](https://github.com/ClickHouse/ClickHouse/pull/94605) ([Pablo Marcos](https://github.com/pamarcos)).
* Backported in [#95165](https://github.com/ClickHouse/ClickHouse/issues/95165): Run purging of jemalloc dirty pages in a different thread from main thread of MemoryWorker. If purging is slow, it could delay updates of RSS usage which could lead to out of memory kills of the process. Introduce new config `memory_worker_purge_total_memory_threshold_ratio` to start purging dirty pages based on ratio of total memory usage. [#94902](https://github.com/ClickHouse/ClickHouse/pull/94902) ([Antonio Andelic](https://github.com/antonio2368)).
* Backported in [#95432](https://github.com/ClickHouse/ClickHouse/issues/95432): Now `view_duration_ms` shows the time when group was active, not the sum of the threads duration in it. [#94966](https://github.com/ClickHouse/ClickHouse/pull/94966) ([Sema Checherinda](https://github.com/CheSema)).

#### Bug Fix (user-visible misbehavior in an official stable release)
* Fix min/max value in Iceberg writes. [#91589](https://github.com/ClickHouse/ClickHouse/pull/91589) ([Anton Ivashkin](https://github.com/ianton-ru)).
* Backported in [#95282](https://github.com/ClickHouse/ClickHouse/issues/95282): Fix query parameter substitution in CREATE USER authentication methods when using ON CLUSTER. Query parameters in authentication methods (e.g., password) were not being replaced, causing UNKNOWN_QUERY_PARAMETER errors on remote nodes. [#92777](https://github.com/ClickHouse/ClickHouse/pull/92777) ([xiaohuanlin](https://github.com/xiaohuanlin)).
* Backported in [#94761](https://github.com/ClickHouse/ClickHouse/issues/94761): Fix join results when the right-side join key is a sparse column. This closes [#92920](https://github.com/ClickHouse/ClickHouse/issues/92920). I can only reproduce the bug with `set compatibility='23.3'`. Not sure if it should be backported. [#93038](https://github.com/ClickHouse/ClickHouse/pull/93038) ([Amos Bird](https://github.com/amosbird)).
* Backported in [#95527](https://github.com/ClickHouse/ClickHouse/issues/95527): Backups could crash the server if you do many concurrent backups clashing over the same files. [#93659](https://github.com/ClickHouse/ClickHouse/pull/93659) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Backported in [#95349](https://github.com/ClickHouse/ClickHouse/issues/95349): Fix attaching Replicated DBs when the interserver host changed after restarting. [#93779](https://github.com/ClickHouse/ClickHouse/pull/93779) ([Tuan Pham Anh](https://github.com/tuanpach)).
* Backported in [#95512](https://github.com/ClickHouse/ClickHouse/issues/95512): Fixed `_part_offset` corruption when projections are rebuilt during merges, and optimized projection processing by avoiding unnecessary reads of the `_part_offset` column and skipping unneeded columns in projection calculations. This continues the optimizations introduced in [#93233](https://github.com/ClickHouse/ClickHouse/issues/93233). [#93827](https://github.com/ClickHouse/ClickHouse/pull/93827) ([Amos Bird](https://github.com/amosbird)).
* Backported in [#94355](https://github.com/ClickHouse/ClickHouse/issues/94355): Fix bad check for typed paths in JSON. Checj was introduced in https://github.com/ClickHouse/ClickHouse/pull/92842 and can lead to error during existing tables startup. [#94070](https://github.com/ClickHouse/ClickHouse/pull/94070) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#95200](https://github.com/ClickHouse/ClickHouse/issues/95200): Fix function to subcolumns optimization not applied to subcolumns. [#94323](https://github.com/ClickHouse/ClickHouse/pull/94323) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#94926](https://github.com/ClickHouse/ClickHouse/issues/94926): Fix a crash during ANY LEFT JOIN optimization when `isNotNull` is evaluated on a missing column. [#94600](https://github.com/ClickHouse/ClickHouse/pull/94600) ([Molly](https://github.com/ggmolly)).
* Backported in [#94819](https://github.com/ClickHouse/ClickHouse/issues/94819): Fix permission issues in BACKUP/RESTORE operations. [#94617](https://github.com/ClickHouse/ClickHouse/pull/94617) ([Pablo Marcos](https://github.com/pamarcos)).
* Backported in [#94840](https://github.com/ClickHouse/ClickHouse/issues/94840): Fixes https://github.com/ClickHouse/clickhouse-core-incidents/issues/1250. Likely due to a mix-up, `data_type` (which may be `DataTypeNullable*`) is `static_cast`-ed to `DataTypeDateTime64*`. Instead, we should cast `check_type` (the nested type variable). [#94627](https://github.com/ClickHouse/ClickHouse/pull/94627) ([Miсhael Stetsyuk](https://github.com/mstetsyuk)).
* Backported in [#94808](https://github.com/ClickHouse/ClickHouse/issues/94808): Fix possibly incorrect RIGHT join result when using complex ON conditions. Close [#92913](https://github.com/ClickHouse/ClickHouse/issues/92913). [#94680](https://github.com/ClickHouse/ClickHouse/pull/94680) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Backported in [#94782](https://github.com/ClickHouse/ClickHouse/issues/94782): Preserve constant index granularity (use_const_adaptive_granularity) after Vertical merges. [#94725](https://github.com/ClickHouse/ClickHouse/pull/94725) ([Azat Khuzhin](https://github.com/azat)).
* Backported in [#95638](https://github.com/ClickHouse/ClickHouse/issues/95638): Fix incorrect primary key and skip index pruning for predicates involving `toWeek`, `toYearWeek`, `toStartOfWeek`, `toLastDayOfWeek`, and `toDayOfWeek`, and fix exceptions in some of these functions for valid queries with `LowCardinality(String)`. [#94816](https://github.com/ClickHouse/ClickHouse/pull/94816) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Backported in [#95148](https://github.com/ClickHouse/ClickHouse/issues/95148): The `getURLHostRFC` function was missing bounds checks before dereferencing pointers. When an empty string was passed to `domainRFC`, it would read uninitialized memory, triggering MSan errors. [#94851](https://github.com/ClickHouse/ClickHouse/pull/94851) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Backported in [#95059](https://github.com/ClickHouse/ClickHouse/issues/95059): Fix readonlyness of encrypted disks. [#94852](https://github.com/ClickHouse/ClickHouse/pull/94852) ([Azat Khuzhin](https://github.com/azat)).
* Backported in [#95625](https://github.com/ClickHouse/ClickHouse/issues/95625): Fixes a crash during `ReplicatedMergeTree` startup caused by concurrent removal of `delete_tmp_*` directories. [#94892](https://github.com/ClickHouse/ClickHouse/pull/94892) ([myeongjun](https://github.com/myeongjjun)).
* Backported in [#95570](https://github.com/ClickHouse/ClickHouse/issues/95570): The password argument of the `redis` table function now will be masked in the logs and system tables (e.g.: `query_log`). [#95325](https://github.com/ClickHouse/ClickHouse/pull/95325) ([János Benjamin Antal](https://github.com/antaljanosbenjamin)).
* Backported in [#95499](https://github.com/ClickHouse/ClickHouse/issues/95499): Fix storage lifetime with distributed plan. [#95356](https://github.com/ClickHouse/ClickHouse/pull/95356) ([Azat Khuzhin](https://github.com/azat)).
* Backported in [#95602](https://github.com/ClickHouse/ClickHouse/issues/95602): Avoid possible crash for distributed queries in case of cancellation. [#95466](https://github.com/ClickHouse/ClickHouse/pull/95466) ([Aleksandr Musorin](https://github.com/AVMusorin)).
* Backported in [#95559](https://github.com/ClickHouse/ClickHouse/issues/95559): Fix check for encrypted disks over plain_rewritable (Fixes possible `It is not possible to register multiple plain-rewritable disks with the same object storage prefix`). [#95470](https://github.com/ClickHouse/ClickHouse/pull/95470) ([Azat Khuzhin](https://github.com/azat)).
* Backported in [#95691](https://github.com/ClickHouse/ClickHouse/issues/95691): Fixed `There was an error: Cannot obtain error message` logical error when waiting for a distributed DDL and dropping the Replicated database concurrently. Fixes [#95539](https://github.com/ClickHouse/ClickHouse/issues/95539). [#95664](https://github.com/ClickHouse/ClickHouse/pull/95664) ([Alexander Tokmakov](https://github.com/tavplubix)).

#### Build/Testing/Packaging Improvement
* Backported in [#94943](https://github.com/ClickHouse/ClickHouse/issues/94943): Use `curl` 8.18.0. [#94742](https://github.com/ClickHouse/ClickHouse/pull/94742) ([Konstantin Bogdanov](https://github.com/thevar1able)).
* Backported in [#95238](https://github.com/ClickHouse/ClickHouse/issues/95238): Use `postgres` to REL_18_1. [#95189](https://github.com/ClickHouse/ClickHouse/pull/95189) ([Konstantin Bogdanov](https://github.com/thevar1able)).
* Backported in [#95251](https://github.com/ClickHouse/ClickHouse/issues/95251): Use `libexpat` 2.7.3. [#95218](https://github.com/ClickHouse/ClickHouse/pull/95218) ([Konstantin Bogdanov](https://github.com/thevar1able)).

#### NO CL CATEGORY

* Backported in [#95037](https://github.com/ClickHouse/ClickHouse/issues/95037):. [#95005](https://github.com/ClickHouse/ClickHouse/pull/95005) ([Azat Khuzhin](https://github.com/azat)).

#### NO CL ENTRY

* NO CL ENTRY:  'Backport [#93827](https://github.com/ClickHouse/ClickHouse/issues/93827) to 25.8: Fix rebuilding of projections with _part_offset during merge'. [#95588](https://github.com/ClickHouse/ClickHouse/pull/95588) ([Amos Bird](https://github.com/amosbird)).

#### NOT FOR CHANGELOG / INSIGNIFICANT

* Backported in [#94722](https://github.com/ClickHouse/ClickHouse/issues/94722): If some files in data part are missing, we can end up with inconsistent in-memory state of some columns which can lead to crashes. It's better to throw logical errors in this case. [#92076](https://github.com/ClickHouse/ClickHouse/pull/92076) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#94868](https://github.com/ClickHouse/ClickHouse/issues/94868): Add index out of range check in advanced shared data in JSON. [#94855](https://github.com/ClickHouse/ClickHouse/pull/94855) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#95269](https://github.com/ClickHouse/ClickHouse/issues/95269): CI: BackportCI to check PR content is valid. [#95190](https://github.com/ClickHouse/ClickHouse/pull/95190) ([Max Kainov](https://github.com/maxknv)).

