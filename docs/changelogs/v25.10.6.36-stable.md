---
sidebar_position: 1
sidebar_label: 2026
---

# 2026 Changelog

### ClickHouse release v25.10.6.36-stable (853dbd2ee0c) FIXME as compared to v25.10.5.40-stable (93e6f3ffcbd)

#### Improvement
* Backported in [#94931](https://github.com/ClickHouse/ClickHouse/issues/94931): Force purging of jemalloc arenas in case the ratio of dirty pages size to `max_server_memory_usage` exceeds `memory_worker_purge_dirty_pages_threshold_ratio`. [#93500](https://github.com/ClickHouse/ClickHouse/pull/93500) ([Eduard Karacharov](https://github.com/korowa)).
* Backported in [#94728](https://github.com/ClickHouse/ClickHouse/issues/94728): Add support for SQL-defined named collections in BACKUP/RESTORE for S3 and Azure Blob Storage. Closes [#94604](https://github.com/ClickHouse/ClickHouse/issues/94604). [#94605](https://github.com/ClickHouse/ClickHouse/pull/94605) ([Pablo Marcos](https://github.com/pamarcos)).
* Backported in [#94984](https://github.com/ClickHouse/ClickHouse/issues/94984): Make sure the scheduler would prefer MemoryWorker thread under the CPU starvation, because it protects ClickHouse process from an existential threat. [#94864](https://github.com/ClickHouse/ClickHouse/pull/94864) ([Nikita Mikhaylov](https://github.com/nikitamikhaylov)).
* Backported in [#95141](https://github.com/ClickHouse/ClickHouse/issues/95141): Run purging of jemalloc dirty pages in a different thread from main thread of MemoryWorker. If purging is slow, it could delay updates of RSS usage which could lead to out of memory kills of the process. Introduce new config `memory_worker_purge_total_memory_threshold_ratio` to start purging dirty pages based on ratio of total memory usage. [#94902](https://github.com/ClickHouse/ClickHouse/pull/94902) ([Antonio Andelic](https://github.com/antonio2368)).
* Backported in [#95434](https://github.com/ClickHouse/ClickHouse/issues/95434): Now `view_duration_ms` shows the time when group was active, not the sum of the threads duration in it. [#94966](https://github.com/ClickHouse/ClickHouse/pull/94966) ([Sema Checherinda](https://github.com/CheSema)).

#### Bug Fix (user-visible misbehavior in an official stable release)
* Backported in [#94621](https://github.com/ClickHouse/ClickHouse/issues/94621): Fix possible logical error upon receiving another read request from a replica after a response with the `finish=true` flag was sent. This was possible due to a logical race condition within `MergeTreeReadPoolParallelReplicas`, although it was very unlikely to occur. [#90921](https://github.com/ClickHouse/ClickHouse/pull/90921) ([Nikita Taranov](https://github.com/nickitat)).
* Backported in [#95284](https://github.com/ClickHouse/ClickHouse/issues/95284): Fix query parameter substitution in CREATE USER authentication methods when using ON CLUSTER. Query parameters in authentication methods (e.g., password) were not being replaced, causing UNKNOWN_QUERY_PARAMETER errors on remote nodes. [#92777](https://github.com/ClickHouse/ClickHouse/pull/92777) ([xiaohuanlin](https://github.com/xiaohuanlin)).
* Backported in [#94763](https://github.com/ClickHouse/ClickHouse/issues/94763): Fix join results when the right-side join key is a sparse column. This closes [#92920](https://github.com/ClickHouse/ClickHouse/issues/92920). I can only reproduce the bug with `set compatibility='23.3'`. Not sure if it should be backported. [#93038](https://github.com/ClickHouse/ClickHouse/pull/93038) ([Amos Bird](https://github.com/amosbird)).
* Backported in [#95528](https://github.com/ClickHouse/ClickHouse/issues/95528): Backups could crash the server if you do many concurrent backups clashing over the same files. [#93659](https://github.com/ClickHouse/ClickHouse/pull/93659) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Backported in [#94884](https://github.com/ClickHouse/ClickHouse/issues/94884): Fix attaching Replicated DBs when the interserver host changed after restarting. [#93779](https://github.com/ClickHouse/ClickHouse/pull/93779) ([Tuan Pham Anh](https://github.com/tuanpach)).
* Backported in [#94590](https://github.com/ClickHouse/ClickHouse/issues/94590): Fix type conversion to super type during the join operation of the storage `Join` with `USING` clause. Fixes [#91672](https://github.com/ClickHouse/ClickHouse/issues/91672). Fixes [#78572](https://github.com/ClickHouse/ClickHouse/issues/78572). [#94000](https://github.com/ClickHouse/ClickHouse/pull/94000) ([Dmitry Novik](https://github.com/novikd)).
* Backported in [#94356](https://github.com/ClickHouse/ClickHouse/issues/94356): Fix bad check for typed paths in JSON. Checj was introduced in https://github.com/ClickHouse/ClickHouse/pull/92842 and can lead to error during existing tables startup. [#94070](https://github.com/ClickHouse/ClickHouse/pull/94070) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#95201](https://github.com/ClickHouse/ClickHouse/issues/95201): Fix function to subcolumns optimization not applied to subcolumns. [#94323](https://github.com/ClickHouse/ClickHouse/pull/94323) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#94927](https://github.com/ClickHouse/ClickHouse/issues/94927): Fix a crash during ANY LEFT JOIN optimization when `isNotNull` is evaluated on a missing column. [#94600](https://github.com/ClickHouse/ClickHouse/pull/94600) ([Molly](https://github.com/ggmolly)).
* Backported in [#94820](https://github.com/ClickHouse/ClickHouse/issues/94820): Fix permission issues in BACKUP/RESTORE operations. [#94617](https://github.com/ClickHouse/ClickHouse/pull/94617) ([Pablo Marcos](https://github.com/pamarcos)).
* Backported in [#94842](https://github.com/ClickHouse/ClickHouse/issues/94842): Fixes https://github.com/ClickHouse/clickhouse-core-incidents/issues/1250. Likely due to a mix-up, `data_type` (which may be `DataTypeNullable*`) is `static_cast`-ed to `DataTypeDateTime64*`. Instead, we should cast `check_type` (the nested type variable). [#94627](https://github.com/ClickHouse/ClickHouse/pull/94627) ([Miсhael Stetsyuk](https://github.com/mstetsyuk)).
* Backported in [#94794](https://github.com/ClickHouse/ClickHouse/issues/94794): Fix possibly incorrect RIGHT join result when using complex ON conditions. Close [#92913](https://github.com/ClickHouse/ClickHouse/issues/92913). [#94680](https://github.com/ClickHouse/ClickHouse/pull/94680) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Backported in [#94784](https://github.com/ClickHouse/ClickHouse/issues/94784): Preserve constant index granularity (use_const_adaptive_granularity) after Vertical merges. [#94725](https://github.com/ClickHouse/ClickHouse/pull/94725) ([Azat Khuzhin](https://github.com/azat)).
* Backported in [#95640](https://github.com/ClickHouse/ClickHouse/issues/95640): Fix incorrect primary key and skip index pruning for predicates involving `toWeek`, `toYearWeek`, `toStartOfWeek`, `toLastDayOfWeek`, and `toDayOfWeek`, and fix exceptions in some of these functions for valid queries with `LowCardinality(String)`. [#94816](https://github.com/ClickHouse/ClickHouse/pull/94816) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Backported in [#95149](https://github.com/ClickHouse/ClickHouse/issues/95149): The `getURLHostRFC` function was missing bounds checks before dereferencing pointers. When an empty string was passed to `domainRFC`, it would read uninitialized memory, triggering MSan errors. [#94851](https://github.com/ClickHouse/ClickHouse/pull/94851) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Backported in [#94992](https://github.com/ClickHouse/ClickHouse/issues/94992): Fix readonlyness of encrypted disks. [#94852](https://github.com/ClickHouse/ClickHouse/pull/94852) ([Azat Khuzhin](https://github.com/azat)).
* Backported in [#95214](https://github.com/ClickHouse/ClickHouse/issues/95214): Fix crash under some conditions when join runtime filters are enabled by default. [#95000](https://github.com/ClickHouse/ClickHouse/pull/95000) ([Alexander Gololobov](https://github.com/davenger)).
* Backported in [#95423](https://github.com/ClickHouse/ClickHouse/issues/95423): Make column transform only once during getting content of manifesrt .avro list and files. [#95164](https://github.com/ClickHouse/ClickHouse/pull/95164) ([Daniil Ivanik](https://github.com/divanik)).
* Backported in [#95380](https://github.com/ClickHouse/ClickHouse/issues/95380): Fixed inaccurate memory accounting when applying large patch parts after lightweight updates. Previously, applying large patches could cause excessive memory usage and result in the server process being killed by the OOM killer. [#95231](https://github.com/ClickHouse/ClickHouse/pull/95231) ([Anton Popov](https://github.com/CurtizJ)).
* Backported in [#95571](https://github.com/ClickHouse/ClickHouse/issues/95571): The password argument of the `redis` table function now will be masked in the logs and system tables (e.g.: `query_log`). [#95325](https://github.com/ClickHouse/ClickHouse/pull/95325) ([János Benjamin Antal](https://github.com/antaljanosbenjamin)).
* Backported in [#95604](https://github.com/ClickHouse/ClickHouse/issues/95604): Avoid possible crash for distributed queries in case of cancellation. [#95466](https://github.com/ClickHouse/ClickHouse/pull/95466) ([Aleksandr Musorin](https://github.com/AVMusorin)).
* Backported in [#95544](https://github.com/ClickHouse/ClickHouse/issues/95544): Fix check for encrypted disks over plain_rewritable (Fixes possible `It is not possible to register multiple plain-rewritable disks with the same object storage prefix`). [#95470](https://github.com/ClickHouse/ClickHouse/pull/95470) ([Azat Khuzhin](https://github.com/azat)).
* Backported in [#95693](https://github.com/ClickHouse/ClickHouse/issues/95693): Fixed `There was an error: Cannot obtain error message` logical error when waiting for a distributed DDL and dropping the Replicated database concurrently. Fixes [#95539](https://github.com/ClickHouse/ClickHouse/issues/95539). [#95664](https://github.com/ClickHouse/ClickHouse/pull/95664) ([Alexander Tokmakov](https://github.com/tavplubix)).

#### Build/Testing/Packaging Improvement
* Backported in [#94945](https://github.com/ClickHouse/ClickHouse/issues/94945): Use `curl` 8.18.0. [#94742](https://github.com/ClickHouse/ClickHouse/pull/94742) ([Konstantin Bogdanov](https://github.com/thevar1able)).
* Backported in [#95240](https://github.com/ClickHouse/ClickHouse/issues/95240): Use `postgres` to REL_18_1. [#95189](https://github.com/ClickHouse/ClickHouse/pull/95189) ([Konstantin Bogdanov](https://github.com/thevar1able)).
* Backported in [#95253](https://github.com/ClickHouse/ClickHouse/issues/95253): Use `libexpat` 2.7.3. [#95218](https://github.com/ClickHouse/ClickHouse/pull/95218) ([Konstantin Bogdanov](https://github.com/thevar1able)).

#### NO CL CATEGORY

* Backported in [#95038](https://github.com/ClickHouse/ClickHouse/issues/95038):. [#95005](https://github.com/ClickHouse/ClickHouse/pull/95005) ([Azat Khuzhin](https://github.com/azat)).

#### NOT FOR CHANGELOG / INSIGNIFICANT

* Backported in [#94723](https://github.com/ClickHouse/ClickHouse/issues/94723): If some files in data part are missing, we can end up with inconsistent in-memory state of some columns which can lead to crashes. It's better to throw logical errors in this case. [#92076](https://github.com/ClickHouse/ClickHouse/pull/92076) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#94870](https://github.com/ClickHouse/ClickHouse/issues/94870): Add index out of range check in advanced shared data in JSON. [#94855](https://github.com/ClickHouse/ClickHouse/pull/94855) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#95271](https://github.com/ClickHouse/ClickHouse/issues/95271): CI: BackportCI to check PR content is valid. [#95190](https://github.com/ClickHouse/ClickHouse/pull/95190) ([Max Kainov](https://github.com/maxknv)).

